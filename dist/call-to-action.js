!function(){var locales={en:{BEGIN_PROJECT:"Begin a project like this completely<br /><b>FREE</b>",REGISTER:"Register",DISMISS:"dismiss"},es:{BEGIN_PROJECT:"Comienza un proyecto como este completamente<br /><b>GRATIS</b>",REGISTER:"Registrate",DISMISS:"descartar"}},CallToActionDirective=function($compile,$config,$translate,$location,$analytics){var setCookie=function(cname,cvalue,exdays){var expires=new Date;return expires.setTime(expires.getTime()+24*exdays*60*60*1e3),expires="expires="+expires.toUTCString(),document.cookie=cname+"="+cvalue+"; "+expires},getCookie=function(cname){for(var c,name=cname+"=",ca=document.cookie.split(";"),i=0,len=ca.length;i<len;i++){for(c=ca[i];" "===c.charAt(0);)c=c.substring(1);if(-1!==c.indexOf(name))return c.substring(name.length,c.length)}},translate=function(locale,text){try{return locales[locale][text]}catch(error){return locales.en[text]}};return{restrict:"E",link:function($scope,$el,$attrs){return $scope.$on("loader:end",function(){if(!$scope.user&&"1"!==getCookie("callToAction"))return $scope.$apply(function(){var callToActionBox,timelineEl;return $scope.translate=translate.bind(this,$translate.use()),callToActionBox=$compile($('<call-to-action>\n    <div class="close">{{translate("DISMISS")}}</div>\n\n    <div class="center">\n        <p ng-bind-html=\'translate("BEGIN_PROJECT")\'></p>\n        <a class="register btn-small" variant="primary">{{translate("REGISTER")}}</a>\n    </div>\n</call-to-action>'))($scope),(timelineEl=$el.find(".project-data .timeline")).prepend(callToActionBox),timelineEl.find(".close").on("click",function(e){return e.preventDefault(),e.stopPropagation(),callToActionBox.fadeOut("fast"),setCookie("callToAction",1,730)}),timelineEl.find("call-to-action").on("click",function(e){return e.preventDefault(),$analytics.trackEvent("call-to-action","register-click","click the register button in the call to action",1),$location.url("/register")})})})}}};angular.module("callToActionPlugin",[]).directive("body",["$compile","$tgConfig","$translate","$tgLocation","$tgAnalytics",CallToActionDirective])}.call(this);